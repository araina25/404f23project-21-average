import{u as c,a}from"./authorStore.17402b56.js";import g from"./postComponent.7b19cc8d.js";import P from"./sidebar.0135b395.js";import{_ as b,s as d,c as p,a as o,F as C,u as f,b as v,n as m,v as y,d as S,q as I,t as w,x,o as l,y as A}from"./entry.448beef3.js";import"./commentComponent.d9fda011.js";import"./nuxt-link.45edca7a.js";const k={name:"SocialDistributionApp",components:{PostComponent:g,SidebarComponent:P},data(){return{posts:[],postContent:"",postImage:null,isPublic:!0,showPostPopup:!1}},async mounted(){const s=c(),t=await a.get(s.BASE_URL+"/authors/"+s.getAuthorId+"/posts/");this.posts=t.data.results},methods:{onImageSelected(s){const t=s.target.files[0];if(t){const r=new FileReader;r.readAsDataURL(t),r.onload=u=>{this.postImage=u.target.result}}},async submitPost(){const s=c();try{const t={visibility:this.isPublic?"PUBLIC":"FRIENDS",unlisted:!1,title:"string",source:"string",origin:"string",description:"string",contentType:"string",content:this.postContent,published:new Date().toISOString(),categories:"string",image:this.postImage};a.defaults.headers.common.Authorization=`Bearer ${s.getAuthToken}`;const r=await a.post(s.BASE_URL+"/authors/"+s.getAuthorId+"/posts/",t)}catch(t){console.error("Error while creating post:",t)}this.showPostPopup=!1}},async created(){const s=c();try{const t=await a.get(s.BASE_URL+"/authors/"+s.getAuthorId+"/posts/")}catch(t){console.error("Error while fetching posts:",t)}}};const B={class:"homepage-container"},D={class:"homepage-main-content"},U={class:"add-post-button-container"},E={class:"posts-feed"},L=o("h2",null,"Posts",-1),N={key:0,class:"post-popup"},R={class:"create-post"},V=o("span",{"aria-hidden":"true"},"Ã—",-1),F=[V],T={class:"post-actions"},M={class:"upload-image"},q={class:"toggle-container"},z={class:"switch"},O=o("span",{class:"slider"},null,-1);function W(s,t,r,u,n,i){const h=d("PostComponent"),_=d("SidebarComponent");return l(),p("div",B,[o("div",D,[o("div",U,[o("button",{onClick:t[0]||(t[0]=e=>n.showPostPopup=!0)},"Add New Post")]),o("div",E,[L,(l(!0),p(C,null,f(n.posts,e=>(l(),A(h,{key:e.id,postContent:e.content,userId:e.owner.username,postID:e.id},null,8,["postContent","userId","postID"]))),128))]),v(_)]),n.showPostPopup?(l(),p("div",N,[o("div",R,[o("button",{type:"button",class:"close btn-close","aria-label":"Close",onClick:t[1]||(t[1]=e=>n.showPostPopup=!1)},F),m(o("textarea",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.postContent=e),placeholder:"What's on your mind?"},null,512),[[y,n.postContent]]),o("div",T,[o("label",M,[S(" Upload Image "),o("input",{type:"file",onChange:t[3]||(t[3]=(...e)=>i.onImageSelected&&i.onImageSelected(...e))},null,32)]),o("div",q,[o("label",z,[m(o("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=e=>n.isPublic=e)},null,512),[[I,n.isPublic]]),O]),o("span",null,w(n.isPublic?"Public":"Private"),1)])]),o("button",{onClick:t[5]||(t[5]=(...e)=>i.submitPost&&i.submitPost(...e))},"Post")])])):x("",!0)])}const X=b(k,[["render",W]]);export{X as default};
