import{u as a,a as m}from"./authorStore.17402b56.js";import{_ as l,c as r,F as d,u,a as s,n as h,v as p,o as j,t as i}from"./entry.448beef3.js";const _={props:{postId:{type:String,required:!0}},data(){return{comments:[],newComment:""}},async created(){await this.fetchComments()},methods:{async fetchComments(){const e=a();try{const t=await m.get(`${e.BASE_URL}/authors/${e.getAuthorId}/posts/${this.postId}/comments/`);console.log("40",t.data),this.comments=t.data.results,console.log("jjkkkjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjj"),console.log(this.comments.results)}catch(t){console.error("Error while fetching comments:",t)}},async submitComment(){if(this.newComment.trim()!==""){const e=a();try{const t={comment:this.newComment,contentType:"string",published:new Date().toISOString()};m.defaults.headers.common.Authorization=`Bearer ${e.getAuthToken}`,await m.post(`${e.BASE_URL}/authors/${e.getAuthorId}/posts/${this.postId}/comments/`,t),console.log(t),this.newComment="",await this.fetchComments()}catch(t){console.error("Error while creating comment:",t)}}}}},g={class:"comment-section"},C={class:"comment-author"},w={class:"comment-content"},f={class:"add-comment"};function y(e,t,v,S,n,c){return j(),r("div",g,[(j(!0),r(d,null,u(n.comments,o=>(j(),r("div",{key:o.id,class:"comment"},[s("div",C,i(o.commenter.username),1),s("div",w,i(o.comment),1)]))),128)),s("div",f,[h(s("textarea",{"onUpdate:modelValue":t[0]||(t[0]=o=>n.newComment=o),placeholder:"Add a comment"},null,512),[[p,n.newComment]]),s("button",{onClick:t[1]||(t[1]=(...o)=>c.submitComment&&c.submitComment(...o))},"Submit")])])}const x=l(_,[["render",y]]);export{x as default};
