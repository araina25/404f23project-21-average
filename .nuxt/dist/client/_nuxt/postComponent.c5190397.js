import{a as p}from"./axios.47b9d439.js";import{u}from"./authorStore.54f7983f.js";import{_,c as r,a as e,t as d,x as g,n as h,v as C,d as P,q as f,o as a,p as b,e as k}from"./entry.21dffc3a.js";const x={props:{profilePicture:{type:String,default:""},userId:String,postID:String,postContent:String},data(){return{liked:!1,showCommentBox:!1,showEditPost:!1,postMainContent:this.postContent,editedPostContent:"",postImage:null,isPublic:!1}},async created(){const i=u();try{console.log("http://localhost:8000/api/post/"+this.postID);const t=await p.get("http://127.0.0.1:8000/authors/"+i.getAuthorId+"/posts/");console.log(t),this.postMainContent=t.data.results.content,t.status===200?this.post=t.data:console.error("Error fetching post:",t)}catch(t){console.error("Error while fetching post:",t)}},methods:{toggleLike(){this.liked=!this.liked},toggleCommentBox(){this.showCommentBox=!this.showCommentBox},onImageSelected(i){const t=i.target.files[0];if(t){const l=new FileReader;l.readAsDataURL(t),l.onload=c=>{this.postImage=c.target.result}}},async updatePost(){const i=u();this.postContent=this.editedPostContent,this.showEditPost=!1;const t={type:this.isPublic?"PUBLIC":"FRIENDS",title:"string",source:"string",origin:"string",description:"string",contentType:"string",content:this.postContent,published:new Date().toISOString(),categories:"string"},l=await p.get("http://127.0.0.1:8000/authors/"+i.getAuthorId+"/posts/"+this.postID,t);console.log(l)}}},m=i=>(b("data-v-a95db836"),i=i(),k(),i),I={class:"post"},v={class:"post-status-icon"},w={key:0,class:"bi bi-globe"},y={key:1,class:"bi bi-lock-fill"},S={class:"user-info"},B=["src"],E={class:"user-id"},D={class:"post-actions"},U={key:0},L=m(()=>e("textarea",{placeholder:"Write a comment"},null,-1)),V={key:0,class:"edit-post"},A={class:"post-actions"},M={class:"upload-image"},N={class:"toggle-container"},R={class:"switch"},T=m(()=>e("span",{class:"slider"},null,-1)),F={style:{color:"white"}};function q(i,t,l,c,s,n){return a(),r("div",null,[e("div",I,[e("div",v,[s.isPublic?(a(),r("i",w)):(a(),r("i",y))]),e("div",S,[e("img",{src:l.profilePicture,alt:"User Profile Picture",class:"profile-pic"},null,8,B),e("span",E,d(l.userId),1)]),e("p",null,d(l.postContent),1),e("div",D,[e("button",{onClick:t[0]||(t[0]=(...o)=>n.toggleLike&&n.toggleLike(...o))},d(s.liked?"Unlike":"Like"),1),e("button",{onClick:t[1]||(t[1]=(...o)=>n.toggleCommentBox&&n.toggleCommentBox(...o))},"Comment"),e("button",{class:"edit",onClick:t[2]||(t[2]=o=>s.showEditPost=!s.showEditPost)},"Edit")]),s.showCommentBox?(a(),r("div",U,[L,e("button",{onClick:t[3]||(t[3]=(...o)=>n.toggleCommentBox&&n.toggleCommentBox(...o))},"Post Comment")])):g("",!0)]),s.showEditPost?(a(),r("div",V,[h(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=o=>s.editedPostContent=o),placeholder:"Edit your post"},null,512),[[C,s.editedPostContent]]),e("div",A,[e("label",M,[P(" Change Image "),e("input",{type:"file",onChange:t[5]||(t[5]=(...o)=>n.onImageSelected&&n.onImageSelected(...o))},null,32)]),e("div",N,[e("label",R,[h(e("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=o=>s.isPublic=o)},null,512),[[f,s.isPublic]]),T]),e("span",F,d(s.isPublic?"Public":"Private"),1)])]),e("button",{onClick:t[7]||(t[7]=(...o)=>n.updatePost&&n.updatePost(...o))},"Update Post")])):g("",!0)])}const z=_(x,[["render",q],["__scopeId","data-v-a95db836"]]);export{z as default};
