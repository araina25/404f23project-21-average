import{u as c}from"./authorStore.46a54328.js";import _ from"./postComponent.38178e8d.js";import P from"./sidebar.d4363570.js";import{a}from"./axios.47b9d439.js";import{_ as b,s as u,c as p,a as o,F as C,u as f,b as I,n as m,v,d as y,q as w,t as S,x as k,o as l,y as x}from"./entry.5646ab74.js";import"./nuxt-link.79554d79.js";const A={name:"SocialDistributionApp",components:{PostComponent:_,SidebarComponent:P},data(){return{posts:[],postContent:"",postImage:null,isPublic:!0,showPostPopup:!1}},async mounted(){const s=c(),t=await a.get({}.API_URL+s.getAuthorId+"/posts/");this.posts=t.data.results},methods:{onImageSelected(s){const t=s.target.files[0];if(t){const r=new FileReader;r.readAsDataURL(t),r.onload=d=>{this.postImage=d.target.result}}},async submitPost(){const s=c();try{const t={type:this.isPublic?"PUBLIC":"FRIENDS",title:"string",source:"string",origin:"string",description:"string",contentType:"string",content:this.postContent,published:new Date().toISOString(),categories:"string",image:this.postImage};a.defaults.headers.common.Authorization=`Bearer ${s.getAuthToken}`;const r=await a.post({}.API_URL+s.getAuthorId+"/posts/",t);console.log(r.data)}catch(t){console.error("Error while creating post:",t)}this.showPostPopup=!1}},async created(){const s=c();try{console.log(s.authorId,s.authToken);const t=await a.get({}.API_URL+s.getAuthorId+"/posts/")}catch(t){console.error("Error while fetching posts:",t)}}};const D={class:"homepage-container"},U={class:"homepage-main-content"},B={class:"add-post-button-container"},L={class:"posts-feed"},N=o("h2",null,"Posts",-1),R={key:0,class:"post-popup"},V={class:"create-post"},T=o("span",{"aria-hidden":"true"},"Ã—",-1),E=[T],F={class:"post-actions"},M={class:"upload-image"},q={class:"toggle-container"},z={class:"switch"},O=o("span",{class:"slider"},null,-1);function W(s,t,r,d,n,i){const h=u("PostComponent"),g=u("SidebarComponent");return l(),p("div",D,[o("div",U,[o("div",B,[o("button",{onClick:t[0]||(t[0]=e=>n.showPostPopup=!0)},"Add New Post")]),o("div",L,[N,(l(!0),p(C,null,f(n.posts,e=>(l(),x(h,{key:e.id,postContent:e.content,postID:e.id},null,8,["postContent","postID"]))),128))]),I(g)]),n.showPostPopup?(l(),p("div",R,[o("div",V,[o("button",{type:"button",class:"close btn-close","aria-label":"Close",onClick:t[1]||(t[1]=e=>n.showPostPopup=!1)},E),m(o("textarea",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.postContent=e),placeholder:"What's on your mind?"},null,512),[[v,n.postContent]]),o("div",F,[o("label",M,[y(" Upload Image "),o("input",{type:"file",onChange:t[3]||(t[3]=(...e)=>i.onImageSelected&&i.onImageSelected(...e))},null,32)]),o("div",q,[o("label",z,[m(o("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=e=>n.isPublic=e)},null,512),[[w,n.isPublic]]),O]),o("span",null,S(n.isPublic?"Public":"Private"),1)])]),o("button",{onClick:t[5]||(t[5]=(...e)=>i.submitPost&&i.submitPost(...e))},"Post")])])):k("",!0)])}const X=b(A,[["render",W]]);export{X as default};
